<!doctype html>

<html lang="en-us">

	<head>
		<meta charset="utf-8">
		
		<title>Project Euler Problem 45 Solution - Zach Denton</title>
		
		<meta name="author" content="Zach Denton">
		<meta name="description" content="This page presents solutions to Project Euler Problem 45 in Haskell, Python and Ruby.">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Share+Tech:400">
		<link rel="stylesheet" href="../../css/main.css">
		<script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script>
		<script src="../../js/main.js"></script>
		
		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({
  			tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  		});
		</script>
		<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		
	</head>
	
	<body>
	
		<div id="banner"></div>
		<header id="header" role="banner">
			<h1><a href="../../">Zach Denton</a></h1>
			<nav>
			<ul>
				<li><a href="../../about/">About</a></li>
				<li><a href="../../archives/">Blog</a></li>
				<li><a href="../../project-euler-solutions/">Euler</a></li>
				<li><a href="https://github.com/zacharydenton">GitHub</a></li>
				<li><a href="../../resume.pdf">Resume</a></li>
			</ul>
			</nav>
		</header>

		<article>
  <h1>Project Euler Problem 45 Solution</h1>

  <h2 id="question">Question</h2>
<p>Triangle, pentagonal, and hexagonal numbers are generated by the following formulae:</p>
<p><br /><span class="math">$$\begin{aligned}
\text{Triangle} &amp; T_n=\frac{n(n+1)}{2} &amp; 1, 3, 6, 10, 15, \dots \\
\text{Pentagonal} &amp; P_n=\frac{n(3n−1)}{2} &amp; 1, 5, 12, 22, 35, \dots \\
\text{Hexagonal} &amp; H_n=n(2n−1) &amp; 1, 6, 15, 28, 45, \dots 
\end{aligned}$$</span><br /></p>
<p>It can be verified that <span class="math"><em>T</em><sub>285</sub> = <em>P</em><sub>165</sub> = <em>H</em><sub>143</sub> = 40755</span>.</p>
<p>Find the next triangle number that is also pentagonal and hexagonal.</p>
<h2 id="haskell">Haskell</h2>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">import qualified</span> <span class="dt">Data.Set</span> <span class="kw">as</span> <span class="dt">Set</span>

<span class="ot">triangles ::</span> [<span class="dt">Int</span>]
triangles <span class="fu">=</span> [(n<span class="fu">*</span>(n <span class="fu">+</span> <span class="dv">1</span>)) <span class="ot">`quot`</span> <span class="dv">2</span> <span class="fu">|</span> n <span class="ot">&lt;-</span> [<span class="dv">1</span><span class="fu">..</span>]]

<span class="ot">pentagonals ::</span> [<span class="dt">Int</span>]
pentagonals <span class="fu">=</span> [(n<span class="fu">*</span>(<span class="dv">3</span><span class="fu">*</span>n <span class="fu">-</span> <span class="dv">1</span>)) <span class="ot">`quot`</span> <span class="dv">2</span> <span class="fu">|</span> n <span class="ot">&lt;-</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">100000</span>]]

<span class="ot">hexagonals ::</span> [<span class="dt">Int</span>]
hexagonals <span class="fu">=</span> [n<span class="fu">*</span>(<span class="dv">2</span><span class="fu">*</span>n <span class="fu">-</span> <span class="dv">1</span>) <span class="fu">|</span> n <span class="ot">&lt;-</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">100000</span>]]

<span class="ot">candidates ::</span> [<span class="dt">Int</span>]
candidates <span class="fu">=</span> dropWhile (<span class="fu">&lt;=</span> <span class="dv">40755</span>) [t <span class="fu">|</span> t <span class="ot">&lt;-</span> triangles, isPentagonal t, isHexagonal t]
    <span class="kw">where</span> isPentagonal <span class="fu">=</span> (<span class="ot">`Set.member`</span> Set.fromList pentagonals)
          isHexagonal <span class="fu">=</span> (<span class="ot">`Set.member`</span> Set.fromList hexagonals)

<span class="ot">main ::</span> <span class="dt">IO</span> ()
main <span class="fu">=</span> print <span class="fu">$</span> head candidates</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">ghc</span> -O2 -o tri-pen-hex tri-pen-hex.hs
$ <span class="kw">time</span> ./tri-pen-hex
<span class="kw">real</span>   0m0.073s
<span class="kw">user</span>   0m0.060s
<span class="kw">sys</span>    0m0.009s</code></pre>
<h2 id="python">Python</h2>
<pre class="sourceCode python"><code class="sourceCode python"><span class="co">#!/usr/bin/env python</span>
<span class="kw">def</span> triangle(n):
    <span class="kw">return</span> n*(n<span class="dv">+1</span>)/<span class="dv">2</span>

<span class="kw">def</span> pentagonal(n):
    <span class="kw">return</span> n*(<span class="dv">3</span>*n<span class="dv">-1</span>)/<span class="dv">2</span>

<span class="kw">def</span> hexagonal(n):
    <span class="kw">return</span> n*(<span class="dv">2</span>*n<span class="dv">-1</span>)

<span class="kw">def</span> main():
    p = <span class="dt">set</span>(pentagonal(n) <span class="kw">for</span> n in <span class="dt">range</span>(<span class="dv">100000</span>))
    h = <span class="dt">set</span>(hexagonal(n) <span class="kw">for</span> n in <span class="dt">range</span>(<span class="dv">100000</span>))
    <span class="kw">for</span> n in <span class="dt">range</span>(<span class="dv">100000</span>):
        t = triangle(n)
        <span class="kw">if</span> t in p and t in h and t &gt; <span class="dv">40755</span>:
            <span class="dt">print</span> t

<span class="kw">if</span> <span class="ot">__name__</span> == <span class="st">&quot;__main__&quot;</span>:
    main()</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">time</span> python2 tri-pen-hex.py
<span class="kw">real</span>   0m0.161s
<span class="kw">user</span>   0m0.145s
<span class="kw">sys</span>    0m0.010s</code></pre>
<h2 id="ruby">Ruby</h2>
<pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="kw">#!/usr/bin/env ruby</span>
require <span class="st">'set'</span>
p = (<span class="dv">1</span>..<span class="dv">100000</span>).map { |n| n*(<span class="dv">3</span>*n<span class="dv">-1</span>)/<span class="dv">2</span> }.to_set
h = (<span class="dv">1</span>..<span class="dv">100000</span>).map { |n| n*(<span class="dv">2</span>*n<span class="dv">-1</span>) }.to_set
puts (<span class="dv">286</span>..<span class="dv">100000</span>).map { |n| n*(n<span class="dv">+1</span>)/<span class="dv">2</span> }.detect { |t|
  p.include?(t) <span class="kw">and</span> h.include?(t)
}</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">time</span> ruby tri-pen-hex.rb
<span class="kw">real</span>   0m0.231s
<span class="kw">user</span>   0m0.223s
<span class="kw">sys</span>    0m0.008s</code></pre>
</article>


	</body>
</html>
