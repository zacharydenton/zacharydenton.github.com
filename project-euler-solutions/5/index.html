<!doctype html>

<html lang="en-us">

	<head>
		<meta charset="utf-8">
		
		<title>Project Euler Problem 5 Solution - Zach Denton</title>
		
		<meta name="author" content="Zach Denton">
		<meta name="description" content="This page presents solutions to Project Euler Problem 5 in Haskell, Python and Ruby.">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Share+Tech:400">
		<link rel="stylesheet" href="../../css/main.css">
		
		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({
  			tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  		});
		</script>
		<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		
	</head>
	
	<body>
	
		<div id="banner"></div>
		<header id="header" role="banner">
			<h1><a href="../../">Zach Denton</a></h1>
			<nav>
			<ul>
				<li><a href="../../about/">About</a></li>
				<li><a href="../../archives/">Blog</a></li>
				<li><a href="../../project-euler-solutions/">Euler</a></li>
				<li><a href="https://github.com/zacharydenton">GitHub</a></li>
				<li><a href="../../resume.pdf">Resume</a></li>
			</ul>
			</nav>
		</header>
		<article>
  <h1>Project Euler Problem 5 Solution</h1>

  <h2 id="question">Question</h2>
<p>2520 is the smallest number that can be divided by each of the numbers from 1 to 10 without any remainder.</p>
<p>What is the smallest positive number that is evenly divisible by all of the numbers from 1 to 20?</p>
<h2 id="commentary">Commentary</h2>
<p>The critical insight of this problem is this:</p>
<p><br /><span class="math"><em>d</em><em>i</em><em>v</em><em>i</em><em>s</em><em>i</em><em>b</em><em>l</em><em>e</em><em>t</em><em>o</em>(<em>x</em>) = <em>n</em> × <em>d</em><em>i</em><em>v</em><em>i</em><em>s</em><em>i</em><em>b</em><em>l</em><em>e</em><em>t</em><em>o</em>(<em>x</em> − 1)</span><br /></p>
<p>This means that when searching for the smallest number divisible to 20, we can increment by the smallest number divisible to 19 each time (since the smallest number divisible to 19 is inherently a factor of the smallest number divisible to 20).</p>
<p>This insight is used in the python solution on line 14:</p>
<pre><code>step = divisible_to(x-1)</code></pre>
<p>This is a recursive solution to the problem, and yields incredible performance. It can calculate the smallest number divisible to 500 in a fraction of a second.</p>
<h2 id="haskell">Haskell</h2>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">isDivisibleTo ::</span>  <span class="dt">Integer</span> <span class="ot">-&gt;</span> <span class="dt">Integer</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
isDivisibleTo x n <span class="fu">=</span> all (\i <span class="ot">-&gt;</span> n <span class="ot">`mod`</span> i <span class="fu">==</span> <span class="dv">0</span>) (reverse [<span class="dv">1</span><span class="fu">..</span>x])

<span class="ot">divisibleTo ::</span>  <span class="dt">Integer</span> <span class="ot">-&gt;</span> <span class="dt">Integer</span>
divisibleTo <span class="dv">1</span> <span class="fu">=</span> <span class="dv">1</span>
divisibleTo x <span class="fu">=</span> <span class="kw">let</span> step <span class="fu">=</span> divisibleTo (x<span class="fu">-</span><span class="dv">1</span>)
                <span class="kw">in</span>  head <span class="fu">$</span> filter (isDivisibleTo x) [step,<span class="dv">2</span><span class="fu">*</span>step<span class="fu">..</span>]

<span class="ot">main ::</span>  <span class="dt">IO</span> ()
main <span class="fu">=</span> print <span class="fu">$</span> divisibleTo <span class="dv">20</span></code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">ghc</span> -O2 -o divisible divisible.hs
$ <span class="kw">time</span> ./divisible
<span class="kw">real</span>   0m0.004s
<span class="kw">user</span>   0m0.001s
<span class="kw">sys</span>    0m0.000s</code></pre>
<h2 id="python">Python</h2>
<pre class="sourceCode python"><code class="sourceCode python"><span class="co">#!/usr/bin/env python</span>
<span class="kw">def</span> is_divisible_to(number, x):
    <span class="kw">for</span> i in <span class="dt">reversed</span>(<span class="dt">range</span>(<span class="dv">1</span>, x<span class="dv">+1</span>)):
        <span class="kw">if</span> number % i != <span class="dv">0</span>:
            <span class="kw">return</span> <span class="ot">False</span>
    <span class="kw">return</span> <span class="ot">True</span>

<span class="kw">def</span> divisible_to(x):
    <span class="kw">if</span> x &lt; <span class="dv">1</span>:
        <span class="kw">return</span> <span class="ot">False</span>
    <span class="kw">elif</span> x == <span class="dv">1</span>:
        <span class="kw">return</span> <span class="dv">1</span>
    <span class="kw">else</span>:
        step = divisible_to(x<span class="dv">-1</span>)
        number = <span class="dv">0</span>
        found = <span class="ot">False</span>
        <span class="kw">while</span> not found:
            number += step
            found = is_divisible_to(number, x)
        <span class="kw">return</span> number

<span class="dt">print</span> divisible_to(<span class="dv">20</span>)</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">time</span> python2 divisible.py
<span class="kw">real</span>   0m0.011s
<span class="kw">user</span>   0m0.009s
<span class="kw">sys</span>    0m0.001s</code></pre>
<h2 id="ruby">Ruby</h2>
<pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="kw">#!/usr/bin/env ruby</span>

<span class="kw">class</span> <span class="dt">Numeric</span>
  <span class="kw">def</span> divisible_to?(x)
    <span class="dv">self</span> &gt; <span class="dv">0</span> <span class="kw">and</span> x.downto(<span class="dv">1</span>).all? { |i| <span class="dv">self</span> % i == <span class="dv">0</span> }
  <span class="kw">end</span>
<span class="kw">end</span>

<span class="kw">def</span> divisible_to(x)
  <span class="kw">if</span> x &lt; <span class="dv">1</span>
    <span class="kw">return</span> <span class="dv">false</span>
  <span class="kw">elsif</span> x == <span class="dv">1</span>
    <span class="kw">return</span> <span class="dv">1</span>
  <span class="kw">else</span>
    n = <span class="dv">0</span>
    step = divisible_to(x<span class="dv">-1</span>)
    <span class="kw">until</span> n.divisible_to? x
      n += step
    <span class="kw">end</span>
    <span class="kw">return</span> n
  <span class="kw">end</span>
<span class="kw">end</span>

puts divisible_to(<span class="dv">20</span>)</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">time</span> ruby divisible.rb
<span class="kw">real</span>   0m0.017s
<span class="kw">user</span>   0m0.012s
<span class="kw">sys</span>    0m0.001s</code></pre>
</article>

		<script src="../../js/main.js"></script>
	</body>
</html>
