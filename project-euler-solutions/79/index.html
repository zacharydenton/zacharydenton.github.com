<!doctype html>

<html lang="en-us">

	<head>
		<meta charset="utf-8">
		
		<title>Project Euler Problem 79 Solution - Zach Denton</title>
		
		<meta name="author" content="Zach Denton">
		<meta name="description" content="This page presents solutions to Project Euler Problem 79 in Haskell and Python.">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Share+Tech:400">
		<link rel="stylesheet" href="../../css/main.css">
		
		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({
  			tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  		});
		</script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		
	</head>
	
	<body>
	
		<div id="banner"></div>
		<header role="banner">
			<h1><a href="../../">Zach Denton</a></h1>
			<nav>
			<ul>
				<li><a href="../../about/">About</a></li>
				<li><a href="../../archives/">Blog</a></li>
				<li><a href="../../project-euler-solutions/">Euler</a></li>
				<li><a href="https://github.com/zacharydenton">GitHub</a></li>
				<li><a href="../../resume.pdf">Resume</a></li>
			</ul>
			</nav>
		</header>

		<article>
  <h1>Project Euler Problem 79 Solution</h1>

  <h2 id="question">Question</h2>
<p>A common security method used for online banking is to ask the user for three random characters from a passcode. For example, if the passcode was 531278, they may ask for the 2nd, 3rd, and 5th characters; the expected reply would be: 317.</p>
<p>The text file, <a href="http://projecteuler.net/project/keylog.txt">keylog.txt</a>, contains fifty successful login attempts.</p>
<p>Given that the three characters are always asked for in order, analyse the file so as to determine the shortest possible secret passcode of unknown length.</p>
<h2 id="commentary">Commentary</h2>
<p>I used a statistical approach to solve this problem. Essentially, these are the steps I used:</p>
<ol style="list-style-type: decimal">
<li>For each successful login attempt in the file, make a note of the characters and their position. For example, if the attempt is ‘319’, we would note that ‘3’ is at position 0, ‘1’ is at position 1, and ‘9’ is at position 2. These results are stored in a dictionary of lists, where the keys are the characters and the values are a list of all positions where that character is found.</li>
<li>Next, we calculate the average position of each character. To do this we simply divide the sum of the character’s positions by the number of times the character appeared.</li>
<li>Then, we sort the dictionary by value, so that characters with a smaller average position appear before those with a greater average position.</li>
<li>Finally, we concatenate the sorted characters and return this as the result.</li>
</ol>
<h2 id="haskell">Haskell</h2>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">import </span><span class="dt">Data.List</span> (nub)

<span class="ot">crack ::</span> [<span class="dt">String</span>] <span class="ot">-&gt;</span> <span class="dt">String</span>
crack [] <span class="fu">=</span> []
crack xs <span class="fu">=</span> first <span class="fu">:</span> crack rest <span class="kw">where</span>
    heads <span class="fu">=</span> map head xs
    reject <span class="fu">=</span> nub <span class="fu">$</span> map (<span class="fu">!!</span> <span class="dv">1</span>) <span class="fu">$</span> filter ((<span class="fu">&gt;</span> <span class="dv">1</span>) <span class="fu">.</span> length) xs
    first <span class="fu">=</span> head <span class="fu">$</span> nub <span class="fu">$</span> filter (<span class="ot">`notElem`</span> reject) heads
    rest <span class="fu">=</span> filter ((<span class="fu">&gt;</span> <span class="dv">0</span>) <span class="fu">.</span> length) <span class="fu">$</span> map (\ys'<span class="fu">@</span>(y<span class="fu">:</span>ys) <span class="ot">-&gt;</span> <span class="kw">if</span> y <span class="fu">==</span> first <span class="kw">then</span> ys <span class="kw">else</span> ys') xs

<span class="ot">main ::</span> <span class="dt">IO</span> ()
main <span class="fu">=</span> <span class="kw">do</span>
    str <span class="ot">&lt;-</span> readFile <span class="st">&quot;/home/zach/code/euler/079/keylog.txt&quot;</span>
    <span class="kw">let</span> attempts <span class="fu">=</span> lines str
    putStrLn <span class="fu">$</span> crack attempts</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">ghc</span> -O2 -o passcode-derivation passcode-derivation.hs
$ <span class="kw">time</span> ./passcode-derivation
<span class="kw">real</span>   0m0.003s
<span class="kw">user</span>   0m0.000s
<span class="kw">sys</span>    0m0.003s</code></pre>
<h2 id="python">Python</h2>
<pre class="sourceCode python"><code class="sourceCode python"><span class="co">#!/usr/bin/env python</span>
<span class="ch">import</span> os
<span class="ch">from</span> itertools <span class="ch">import</span> *
<span class="ch">from</span> collections <span class="ch">import</span> defaultdict

<span class="kw">def</span> main():
    attempts = [line.strip() <span class="kw">for</span> line in <span class="dt">open</span>(os.path.join(os.path.dirname(<span class="ot">__file__</span>), <span class="st">'keylog.txt'</span>)).readlines()]
    appearances = defaultdict(<span class="dt">list</span>)
    <span class="kw">for</span> attempt in attempts:
        <span class="kw">for</span> i, n in <span class="dt">enumerate</span>(attempt):
            appearances[n].append(i)

    average_positions = {}
    <span class="kw">for</span> k,v in appearances.items():
        average_positions[k] = <span class="dt">float</span>(<span class="dt">sum</span>(v))/<span class="dt">float</span>(<span class="dt">len</span>(v))

    a = [k <span class="kw">for</span> k,v in <span class="dt">sorted</span>(average_positions.items(), key=<span class="kw">lambda</span> a: a[<span class="dv">1</span>])]
    <span class="dt">print</span> <span class="st">''</span>.join(<span class="dt">str</span>(x) <span class="kw">for</span> x in a)

<span class="kw">if</span> <span class="ot">__name__</span> == <span class="st">&quot;__main__&quot;</span>:
    main()</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">time</span> python2 password-crack.py
<span class="kw">real</span>   0m0.021s
<span class="kw">user</span>   0m0.017s
<span class="kw">sys</span>    0m0.003s</code></pre>
</article>


		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script>
		<script src="../../js/main.js"></script>
	</body>
</html>
